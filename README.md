# ğŸ“š å­¦ä¹ é¡¹ç›®å®Œæˆè€—æ—¶è¶‹åŠ¿åˆ†æç³»ç»Ÿ


ä¸€ä¸ªç°ä»£åŒ–çš„å­¦ä¹ é¡¹ç›®è¿½è¸ªå’Œåˆ†æç³»ç»Ÿï¼Œå¸®åŠ©ç”¨æˆ·è®°å½•å­¦ä¹ é¡¹ç›®å®Œæˆæ—¶é—´ï¼Œåˆ†æå­¦ä¹ æ•ˆç‡è¶‹åŠ¿ï¼Œå¹¶æä¾›ç›´è§‚çš„æ•°æ®å¯è§†åŒ–ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- ğŸ” **å®‰å…¨è®¤è¯ç³»ç»Ÿ** - JWT tokenè®¤è¯ï¼Œæ”¯æŒç”¨æˆ·æ³¨å†Œå’Œç™»å½•
- ğŸ“Š **æ•°æ®å¯è§†åŒ–** - å¤šç§å›¾è¡¨å±•ç¤ºå­¦ä¹ è¶‹åŠ¿å’Œç»Ÿè®¡
- ğŸ“± **å“åº”å¼è®¾è®¡** - å®Œç¾é€‚é…æ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡
- ğŸŒ™ **æ·±è‰²æ¨¡å¼** - æ”¯æŒæ˜æš—ä¸»é¢˜åˆ‡æ¢
- ğŸ“¤ **Excelå¯¼å…¥å¯¼å‡º** - æ”¯æŒExcelæ–‡ä»¶ä¸Šä¼ å’Œæ¨¡æ¿ä¸‹è½½
- ğŸ“ˆ **è¶‹åŠ¿åˆ†æ** - é›·è¾¾å›¾å’ŒæŠ˜çº¿å›¾å±•ç¤ºå­¦ä¹ æ•ˆç‡
- ğŸ”’ **æ•°æ®å®‰å…¨** - æœ¬åœ°SQLiteæ•°æ®åº“ï¼Œæ•°æ®å®Œå…¨ç§æœ‰

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js 18.0+
- npm æˆ– yarn

### æœ¬åœ°å¼€å‘

1. **å…‹éš†é¡¹ç›®**
```bash
git clone https://github.com/laurawu0122/study-tracker.git
cd study-tracker
```

2. **å®‰è£…ä¾èµ–**
```bash
npm install
```

3. **é…ç½®ç¯å¢ƒå˜é‡**
```bash
cp env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å†™å¿…è¦çš„é…ç½®
```

**ğŸ” JWT_SECRET é…ç½®ï¼š**
```bash
# è‡ªåŠ¨ç”ŸæˆJWT_SECRET
JWT_SECRET=$(openssl rand -base64 32)
echo "JWT_SECRET=$JWT_SECRET" >> .env

# æˆ–è€…æ‰‹åŠ¨ç¼–è¾‘.envæ–‡ä»¶ï¼Œå°†JWT_SECRETæ›¿æ¢ä¸ºç”Ÿæˆçš„éšæœºå­—ç¬¦ä¸²
```

4. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
```bash
npm start
```

5. **è®¿é—®åº”ç”¨**
æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:3001`

## ğŸ› ï¸ éƒ¨ç½²æ–¹å¼

æœ¬é¡¹ç›®æ”¯æŒä¸‰ç§éƒ¨ç½²æ–¹å¼ï¼Œç‚¹å‡»ä¸Šæ–¹å¾½ç« å³å¯ä¸€é”®éƒ¨ç½²ï¼š

### 1. Vercel éƒ¨ç½²ï¼ˆæ¨èï¼‰
[![Vercel](https://vercel.com/button)](https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2Flaurawu0122%2Fstudy-tracker)

**ä¼˜åŠ¿ï¼š**
- è‡ªåŠ¨SSLè¯ä¹¦
- å…¨çƒCDNåŠ é€Ÿ
- é›¶é…ç½®éƒ¨ç½²
- å…è´¹é¢åº¦å……è¶³

**éƒ¨ç½²æ­¥éª¤ï¼š**

1. **ç‚¹å‡»éƒ¨ç½²æŒ‰é’®**ï¼šç‚¹å‡»ä¸Šæ–¹çš„ [![Vercel](https://vercel.com/button)](https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2Flaurawu0122%2Fstudy-tracker) æŒ‰é’®

2. **æˆæƒGitHub**ï¼šç™»å½•Vercelå¹¶æˆæƒè®¿é—®GitHub

3. **é…ç½®é¡¹ç›®**ï¼š
   - é¡¹ç›®åç§°ï¼š`study-tracker`ï¼ˆæˆ–è‡ªå®šä¹‰ï¼‰
   - Framework Presetï¼šé€‰æ‹© `Node.js`
   - Root Directoryï¼š`./`ï¼ˆé»˜è®¤ï¼‰

4. **ç¯å¢ƒå˜é‡é…ç½®**ï¼š
   åœ¨Vercelæ§åˆ¶å°çš„ `Settings` â†’ `Environment Variables` ä¸­æ·»åŠ ï¼š
   ```
   JWT_SECRET=your-super-secret-jwt-key-here
   NODE_ENV=production
   ```
   
   **ğŸ” JWT_SECRET è·å–æ–¹å¼ï¼š**
   - **è‡ªåŠ¨ç”Ÿæˆ**ï¼šåœ¨ç»ˆç«¯è¿è¡Œ `openssl rand -base64 32` ç”Ÿæˆéšæœºå­—ç¬¦ä¸²
   - **æ‰‹åŠ¨è®¾ç½®**ï¼šä½¿ç”¨è‡³å°‘32ä½çš„éšæœºå­—ç¬¦ä¸²ï¼ŒåŒ…å«å­—æ¯ã€æ•°å­—å’Œç‰¹æ®Šå­—ç¬¦
   - **å®‰å…¨æé†’**ï¼šä¸è¦ä½¿ç”¨é»˜è®¤å€¼ï¼Œç”Ÿäº§ç¯å¢ƒå¿…é¡»ä½¿ç”¨å¼ºéšæœºå­—ç¬¦ä¸²

5. **éƒ¨ç½²**ï¼šç‚¹å‡» `Deploy` æŒ‰é’®

6. **è®¿é—®åº”ç”¨**ï¼šéƒ¨ç½²å®Œæˆåä¼šè·å¾—ä¸€ä¸ª `https://your-project.vercel.app` çš„é“¾æ¥

### 2. Cloudflare Pages éƒ¨ç½²

**ä¼˜åŠ¿ï¼š**
- æå¿«çš„å…¨çƒè®¿é—®é€Ÿåº¦
- è‡ªåŠ¨DDoSé˜²æŠ¤
- å…è´¹SSLè¯ä¹¦
- è¾¹ç¼˜è®¡ç®—æ”¯æŒ

**éƒ¨ç½²æ­¥éª¤ï¼š**

1. **ç™»å½•Cloudflare**ï¼šä½¿ç”¨Cloudflareè´¦æˆ·ç™»å½•

2. **é€‰æ‹©ä»“åº“**ï¼šé€‰æ‹© `laurawu0122/study-tracker` ä»“åº“

3. **é…ç½®æ„å»ºè®¾ç½®**ï¼š
   - **Framework preset**: `None`
   - **Build command**: `npm install`
   - **Build output directory**: `./`
   - **Root directory**: `./`

4. **ç¯å¢ƒå˜é‡é…ç½®**ï¼š
   åœ¨ `Environment variables` éƒ¨åˆ†æ·»åŠ ï¼š
   ```
   JWT_SECRET=your-super-secret-jwt-key-here
   NODE_ENV=production
   ```
   
   **ğŸ” JWT_SECRET è·å–æ–¹å¼ï¼š**
   - **è‡ªåŠ¨ç”Ÿæˆ**ï¼šåœ¨ç»ˆç«¯è¿è¡Œ `openssl rand -base64 32` ç”Ÿæˆéšæœºå­—ç¬¦ä¸²
   - **æ‰‹åŠ¨è®¾ç½®**ï¼šä½¿ç”¨è‡³å°‘32ä½çš„éšæœºå­—ç¬¦ä¸²ï¼ŒåŒ…å«å­—æ¯ã€æ•°å­—å’Œç‰¹æ®Šå­—ç¬¦
   - **å®‰å…¨æé†’**ï¼šä¸è¦ä½¿ç”¨é»˜è®¤å€¼ï¼Œç”Ÿäº§ç¯å¢ƒå¿…é¡»ä½¿ç”¨å¼ºéšæœºå­—ç¬¦ä¸²

5. **éƒ¨ç½²**ï¼šç‚¹å‡» `Save and Deploy`

6. **è®¿é—®åº”ç”¨**ï¼šéƒ¨ç½²å®Œæˆåä¼šè·å¾—ä¸€ä¸ª `https://your-project.pages.dev` çš„é“¾æ¥

### 3. Docker éƒ¨ç½²

**ä¼˜åŠ¿ï¼š**
- å®Œå…¨æ§åˆ¶éƒ¨ç½²ç¯å¢ƒ
- æ”¯æŒè‡ªå®šä¹‰åŸŸåå’ŒSSL
- æ•°æ®å®Œå…¨ç§æœ‰

**éƒ¨ç½²æ­¥éª¤ï¼š**

1. **å…‹éš†é¡¹ç›®**
```bash
git clone https://github.com/laurawu0122/study-tracker.git
cd study-tracker
```

2. **é…ç½®ç¯å¢ƒå˜é‡**
```bash
cp env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å†™å¿…è¦çš„é…ç½®
```

3. **ç”ŸæˆSSLè¯ä¹¦**ï¼ˆå¯é€‰ï¼‰
```bash
mkdir -p ssl
openssl req -x509 -newkey rsa:4096 \
  -keyout ssl/key.pem \
  -out ssl/cert.pem \
  -days 365 \
  -nodes \
  -subj "/C=CN/ST=State/L=City/O=Organization/CN=localhost"
```

4. **å¯åŠ¨æœåŠ¡**
```bash
docker-compose up -d
```

5. **è®¿é—®åº”ç”¨**
- HTTP: `http://localhost`
- HTTPS: `https://localhost`ï¼ˆå¦‚æœé…ç½®äº†SSLï¼‰

## ğŸ“ é¡¹ç›®ç»“æ„

```
study-tracker/
â”œâ”€â”€ assets/                 # å‰ç«¯èµ„æº
â”‚   â”œâ”€â”€ css/               # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ js/                # JavaScriptæ–‡ä»¶
â”‚   â””â”€â”€ lib/               # ç¬¬ä¸‰æ–¹åº“
â”œâ”€â”€ database/              # æ•°æ®åº“ç›¸å…³
â”œâ”€â”€ middleware/            # ä¸­é—´ä»¶
â”œâ”€â”€ routes/                # APIè·¯ç”±
â”œâ”€â”€ services/              # æœåŠ¡å±‚
â”œâ”€â”€ scripts/               # éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ excel_templates/       # Excelæ¨¡æ¿
â”œâ”€â”€ data/                  # æ•°æ®å­˜å‚¨ç›®å½•
â”œâ”€â”€ server.js              # æœåŠ¡å™¨å…¥å£
â”œâ”€â”€ package.json           # é¡¹ç›®é…ç½®
â”œâ”€â”€ docker-compose.yml     # Dockeré…ç½®
â”œâ”€â”€ vercel.json           # Vercelé…ç½®
â”œâ”€â”€ wrangler.toml         # Cloudflareé…ç½®
â””â”€â”€ README.md             # é¡¹ç›®è¯´æ˜
```

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

åˆ›å»º `.env` æ–‡ä»¶å¹¶é…ç½®ä»¥ä¸‹å˜é‡ï¼š

```env
# åº”ç”¨é…ç½®
NODE_ENV=production
PORT=3001

# JWTé…ç½®
JWT_SECRET=your-super-secret-jwt-key-here

# é‚®ä»¶é…ç½®ï¼ˆå¯é€‰ï¼‰
SMTP_HOST=smtp.qq.com
SMTP_PORT=587
SMTP_USER=your-email@qq.com
SMTP_PASS=your-app-password

# å®‰å…¨é…ç½®
TRUST_PROXY=true
```

#### ğŸ” JWT_SECRET è·å–æ–¹å¼

**æ–¹æ³•ä¸€ï¼šè‡ªåŠ¨ç”Ÿæˆï¼ˆæ¨èï¼‰**
```bash
# ä½¿ç”¨OpenSSLç”Ÿæˆ32ä½éšæœºå­—ç¬¦ä¸²
openssl rand -base64 32
```

**æ–¹æ³•äºŒï¼šæ‰‹åŠ¨è®¾ç½®**
- ä½¿ç”¨è‡³å°‘32ä½çš„éšæœºå­—ç¬¦ä¸²
- å¯ä»¥åŒ…å«å­—æ¯ã€æ•°å­—å’Œç‰¹æ®Šå­—ç¬¦
- ç¤ºä¾‹ï¼š`my-super-secret-jwt-key-2024-xyz123!@#`

**å®‰å…¨å»ºè®®ï¼š**
- ç”Ÿäº§ç¯å¢ƒå¿…é¡»ä½¿ç”¨å¼ºéšæœºå­—ç¬¦ä¸²
- ä¸è¦ä½¿ç”¨é»˜è®¤å€¼æˆ–ç®€å•å­—ç¬¦ä¸²
- å®šæœŸæ›´æ¢JWT_SECRET
- å¦¥å–„ä¿ç®¡ï¼Œä¸è¦æ³„éœ²ç»™ä»–äºº

### å®‰å…¨é…ç½®

1. **JWTå¯†é’¥**ï¼šä½¿ç”¨å¼ºéšæœºå­—ç¬¦ä¸²
2. **é‚®ä»¶é…ç½®**ï¼šä½¿ç”¨åº”ç”¨ä¸“ç”¨å¯†ç 
3. **HTTPS**ï¼šç”Ÿäº§ç¯å¢ƒå¿…é¡»å¯ç”¨
4. **é˜²ç«å¢™**ï¼šé™åˆ¶ç«¯å£è®¿é—®

## ğŸ“Š æ•°æ®æ ¼å¼

### Excelæ–‡ä»¶æ ¼å¼

ç³»ç»Ÿæ”¯æŒå¯¼å…¥Excelæ–‡ä»¶ï¼Œæ ¼å¼è¦æ±‚ï¼š

| åˆ—å | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| é¡¹ç›®åç§° | æ–‡æœ¬ | å­¦ä¹ é¡¹ç›®åç§° |
| å¼€å§‹æ—¶é—´ | æ—¥æœŸ | é¡¹ç›®å¼€å§‹æ—¶é—´ |
| å®Œæˆæ—¶é—´ | æ—¥æœŸ | é¡¹ç›®å®Œæˆæ—¶é—´ |
| è€—æ—¶(å°æ—¶) | æ•°å­— | å®é™…è€—æ—¶ |
| éš¾åº¦ç­‰çº§ | æ•°å­— | 1-5çº§éš¾åº¦ |
| å¤‡æ³¨ | æ–‡æœ¬ | å¯é€‰å¤‡æ³¨ä¿¡æ¯ |

### ä¸‹è½½æ¨¡æ¿

è®¿é—® `/excel_templates/å­¦ä¹ é¡¹ç›®è®°å½•ç¤ºä¾‹.xlsx` ä¸‹è½½æ ‡å‡†æ¨¡æ¿ã€‚

## ğŸ”’ å®‰å…¨ç‰¹æ€§

- **JWTè®¤è¯**ï¼šå®‰å…¨çš„tokenè®¤è¯æœºåˆ¶
- **å¯†ç åŠ å¯†**ï¼šbcryptå¯†ç å“ˆå¸Œ
- **SQLæ³¨å…¥é˜²æŠ¤**ï¼šå‚æ•°åŒ–æŸ¥è¯¢
- **XSSé˜²æŠ¤**ï¼šè¾“å…¥éªŒè¯å’Œè¾“å‡ºç¼–ç 
- **CSRFé˜²æŠ¤**ï¼šSameSite Cookie
- **é€Ÿç‡é™åˆ¶**ï¼šé˜²æ­¢æš´åŠ›æ”»å‡»
- **æ–‡ä»¶ä¸Šä¼ å®‰å…¨**ï¼šç±»å‹å’Œå¤§å°é™åˆ¶

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ç«¯å£è¢«å ç”¨**
```bash
# æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
lsof -i :3001
# ç»ˆæ­¢è¿›ç¨‹
kill -9 <PID>
```

2. **æ•°æ®åº“è¿æ¥å¤±è´¥**
```bash
# æ£€æŸ¥æ•°æ®åº“æ–‡ä»¶æƒé™
ls -la data/
# é‡æ–°åˆå§‹åŒ–æ•°æ®åº“
rm data/study_tracker.db
npm start
```

3. **é‚®ä»¶å‘é€å¤±è´¥**
- æ£€æŸ¥SMTPé…ç½®
- ç¡®è®¤é‚®ç®±æˆæƒç æ­£ç¡®
- æ£€æŸ¥ç½‘ç»œè¿æ¥

### æ—¥å¿—æŸ¥çœ‹

```bash
# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
npm start 2>&1 | tee app.log

# Dockerç¯å¢ƒæŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ™ è‡´è°¢

- [Chart.js](https://www.chartjs.org/) - å›¾è¡¨åº“
- [Moment.js](https://momentjs.com/) - æ—¥æœŸå¤„ç†
- [SheetJS](https://sheetjs.com/) - Excelå¤„ç†
- [Express.js](https://expressjs.com/) - Webæ¡†æ¶

## ğŸ“ æ”¯æŒ

å¦‚æœæ‚¨é‡åˆ°é—®é¢˜æˆ–æœ‰å»ºè®®ï¼Œè¯·ï¼š

1. æŸ¥çœ‹ [å¸¸è§é—®é¢˜](#æ•…éšœæ’é™¤)
2. æœç´¢ [Issues](../../issues)
3. åˆ›å»ºæ–°çš„ [Issue](../../issues/new)

---

â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™å®ƒä¸€ä¸ªæ˜Ÿæ ‡ï¼
